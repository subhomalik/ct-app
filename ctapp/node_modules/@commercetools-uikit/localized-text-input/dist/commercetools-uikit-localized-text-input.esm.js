import _Object$getOwnPropertySymbols from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols';
import _filterInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/filter';
import _Object$getOwnPropertyDescriptor from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor';
import _forEachInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/for-each';
import _Object$getOwnPropertyDescriptors from '@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors';
import _Object$defineProperties from '@babel/runtime-corejs3/core-js-stable/object/define-properties';
import _Object$defineProperty from '@babel/runtime-corejs3/core-js-stable/object/define-property';
import _slicedToArray from '@babel/runtime-corejs3/helpers/esm/slicedToArray';
import _defineProperty from '@babel/runtime-corejs3/helpers/esm/defineProperty';
import _pt from 'prop-types';
import _Object$keys from '@babel/runtime-corejs3/core-js-stable/object/keys';
import _mapInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/map';
import { useCallback } from 'react';
import { FormattedMessage } from 'react-intl';
import { css } from '@emotion/react';
import { useToggleState, useFieldId } from '@commercetools-uikit/hooks';
import { ErrorMessage, WarningMessage, AdditionalInfoMessage } from '@commercetools-uikit/messages';
import Stack from '@commercetools-uikit/spacings-stack';
import Constraints from '@commercetools-uikit/constraints';
import { sortLanguages, getHasErrorOnRemainingLanguages, getHasWarningOnRemainingLanguages, createLocalizedDataAttributes, getId, getName, createLocalizedString, isEmpty, omitEmptyTranslations, isTouched } from '@commercetools-uikit/localized-utils';
import { createSequentialId, warning } from '@commercetools-uikit/utils';
import TextInput from '@commercetools-uikit/text-input';
import { LocalizedInputToggle, messagesLocalizedInput } from '@commercetools-uikit/input-utils';
import { designTokens } from '@commercetools-uikit/design-system';
import { jsx, jsxs } from '@emotion/react/jsx-runtime';

function _EMOTION_STRINGIFIED_CSS_ERROR__$1() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
var _ref$1 = process.env.NODE_ENV === "production" ? {
  name: "1ps4mw6",
  styles: "border-top-left-radius:0;border-bottom-left-radius:0;border-style:solid;flex:auto"
} : {
  name: "bqcila-getLocalizedInputStyles",
  styles: "border-top-left-radius:0;border-bottom-left-radius:0;border-style:solid;flex:auto;label:getLocalizedInputStyles;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnN0eWxlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTSyIsImZpbGUiOiJsb2NhbGl6ZWQtdGV4dC1pbnB1dC5zdHlsZXMudHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5pbXBvcnQgeyBkZXNpZ25Ub2tlbnMgfSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9kZXNpZ24tc3lzdGVtJztcbmltcG9ydCB0eXBlIHsgVExvY2FsaXplZElucHV0UHJvcHMgfSBmcm9tICcuL2xvY2FsaXplZC10ZXh0LWlucHV0JztcblxuLy8gTk9URTogb3JkZXIgaXMgaW1wb3J0YW50IGhlcmVcbi8vICogYSBkaXNhYmxlZC1maWVsZCBjdXJyZW50bHkgZG9lcyBub3QgZGlzcGxheSB3YXJuaW5nL2Vycm9yLXN0YXRlcyBzbyBpdCB0YWtlcyBwcmVjZWRlbmNlXG4vLyAqIGEgcmVhZG9ubHktZmllbGQgY2Fubm90IGJlIGNoYW5nZWQsIGJ1dCBpdCBtaWdodCBiZSByZWxldmFudCBmb3IgdmFsaWRhdGlvbiwgc28gZXJyb3IgYW5kIHdhcm5pbmcgYXJlIGNoZWNrZWQgZmlyc3Rcbi8vIGhvdyB5b3UgY2FuIGludGVyYWN0IHdpdGggdGhlIGZpZWxkIGlzIGNvbnRyb2xsZWQgc2VwYXJhdGVseSBieSB0aGUgcHJvcHMsIHRoaXMgb25seSBpbmZsdWVuY2VzIHZpc3VhbHNcbmNvbnN0IGdldExvY2FsaXplZElucHV0U3R5bGVzID0gKCkgPT4gW1xuICBjc3NgXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xuICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgZmxleDogYXV0bztcbiAgYCxcbl07XG5cbmNvbnN0IGdldExhbmd1YWdlTGFiZWxCYWNrZ3JvdW5kQ29sb3IgPSAocHJvcHM6IFRMb2NhbGl6ZWRJbnB1dFByb3BzKSA9PiB7XG4gIGlmIChwcm9wcy5pc0Rpc2FibGVkKSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5iYWNrZ3JvdW5kQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsV2hlbkRpc2FibGVkO1xuICB9XG4gIGlmIChwcm9wcy5pc1JlYWRPbmx5KSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5iYWNrZ3JvdW5kQ29sb3JGb3JMb2NhbGl6ZWRJbnB1dExhYmVsV2hlblJlYWRvbmx5O1xuICB9XG4gIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbDtcbn07XG5cbmNvbnN0IGdldExhbmd1YWdlTGFiZWxCb3JkZXJDb2xvciA9IChwcm9wczogVExvY2FsaXplZElucHV0UHJvcHMpID0+IHtcbiAgaWYgKHByb3BzLmlzRGlzYWJsZWQpIHtcbiAgICByZXR1cm4gZGVzaWduVG9rZW5zLmJvcmRlckNvbG9yRm9ySW5wdXRXaGVuRGlzYWJsZWQ7XG4gIH1cbiAgcmV0dXJuIHByb3BzLmlzUmVhZE9ubHlcbiAgICA/IGRlc2lnblRva2Vucy5jb2xvclN1cmZhY2VcbiAgICA6IGRlc2lnblRva2Vucy5jb2xvck5ldXRyYWw7XG59O1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsU3R5bGVzID0gKHByb3BzOiBUTG9jYWxpemVkSW5wdXRQcm9wcykgPT4ge1xuICByZXR1cm4gY3NzYFxuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAvKiBhdm9pZCB3cmFwcGluZyBsYWJlbCBvbnRvIG5ldyBsaW5lcyAqL1xuICAgIGZsZXg6IDEgMCBhdXRvO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgY29sb3I6ICR7ZGVzaWduVG9rZW5zLmNvbG9yTmV1dHJhbDYwfTtcbiAgICBjdXJzb3I6ICR7cHJvcHMuaXNEaXNhYmxlZCA/ICdub3QtYWxsb3dlZCcgOiAnZGVmYXVsdCd9O1xuICAgIGhlaWdodDogJHtkZXNpZ25Ub2tlbnMuaGVpZ2h0Rm9ySW5wdXR9O1xuICAgIGZvbnQtc2l6ZTogJHtkZXNpZ25Ub2tlbnMuZm9udFNpemUzMH07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtnZXRMYW5ndWFnZUxhYmVsQmFja2dyb3VuZENvbG9yKHByb3BzKX07XG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHtkZXNpZ25Ub2tlbnMuYm9yZGVyUmFkaXVzRm9ySW5wdXR9O1xuICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICR7ZGVzaWduVG9rZW5zLmJvcmRlclJhZGl1c0ZvcklucHV0fTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAke2dldExhbmd1YWdlTGFiZWxCb3JkZXJDb2xvcihwcm9wcyl9O1xuICAgIHBhZGRpbmc6IDAgJHtkZXNpZ25Ub2tlbnMuc3BhY2luZzI1fTtcbiAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgJHtkZXNpZ25Ub2tlbnMudHJhbnNpdGlvblN0YW5kYXJkfSxcbiAgICAgIGJhY2tncm91bmQtY29sb3IgJHtkZXNpZ25Ub2tlbnMudHJhbnNpdGlvblN0YW5kYXJkfSxcbiAgICAgIGNvbG9yICR7ZGVzaWduVG9rZW5zLnRyYW5zaXRpb25TdGFuZGFyZH07XG4gICAgYm9yZGVyLXJpZ2h0OiAwO1xuICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgYXBwZWFyYW5jZTogbm9uZTtcbiAgYDtcbn07XG5cbmV4cG9ydCB7IGdldExvY2FsaXplZElucHV0U3R5bGVzLCBnZXRMYW5ndWFnZUxhYmVsU3R5bGVzIH07XG4iXX0= */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__$1
};
// NOTE: order is important here
// * a disabled-field currently does not display warning/error-states so it takes precedence
// * a readonly-field cannot be changed, but it might be relevant for validation, so error and warning are checked first
// how you can interact with the field is controlled separately by the props, this only influences visuals
const getLocalizedInputStyles = () => [_ref$1];
const getLanguageLabelBackgroundColor = props => {
  if (props.isDisabled) {
    return designTokens.backgroundColorForLocalizedInputLabelWhenDisabled;
  }
  if (props.isReadOnly) {
    return designTokens.backgroundColorForLocalizedInputLabelWhenReadonly;
  }
  return designTokens.backgroundColorForLocalizedInputLabel;
};
const getLanguageLabelBorderColor = props => {
  if (props.isDisabled) {
    return designTokens.borderColorForInputWhenDisabled;
  }
  return props.isReadOnly ? designTokens.colorSurface : designTokens.colorNeutral;
};
const getLanguageLabelStyles = props => {
  return /*#__PURE__*/css("display:flex;flex-direction:column;justify-content:center;flex:1 0 auto;box-sizing:border-box;color:", designTokens.colorNeutral60, ";cursor:", props.isDisabled ? 'not-allowed' : 'default', ";height:", designTokens.heightForInput, ";font-size:", designTokens.fontSize30, ";background-color:", getLanguageLabelBackgroundColor(props), ";border-top-left-radius:", designTokens.borderRadiusForInput, ";border-bottom-left-radius:", designTokens.borderRadiusForInput, ";border:1px solid ", getLanguageLabelBorderColor(props), ";padding:0 ", designTokens.spacing25, ";transition:border-color ", designTokens.transitionStandard, ",background-color ", designTokens.transitionStandard, ",color ", designTokens.transitionStandard, ";border-right:0;box-shadow:none;appearance:none;" + (process.env.NODE_ENV === "production" ? "" : ";label:getLanguageLabelStyles;"), process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnN0eWxlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxQ1kiLCJmaWxlIjoibG9jYWxpemVkLXRleHQtaW5wdXQuc3R5bGVzLnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgZGVzaWduVG9rZW5zIH0gZnJvbSAnQGNvbW1lcmNldG9vbHMtdWlraXQvZGVzaWduLXN5c3RlbSc7XG5pbXBvcnQgdHlwZSB7IFRMb2NhbGl6ZWRJbnB1dFByb3BzIH0gZnJvbSAnLi9sb2NhbGl6ZWQtdGV4dC1pbnB1dCc7XG5cbi8vIE5PVEU6IG9yZGVyIGlzIGltcG9ydGFudCBoZXJlXG4vLyAqIGEgZGlzYWJsZWQtZmllbGQgY3VycmVudGx5IGRvZXMgbm90IGRpc3BsYXkgd2FybmluZy9lcnJvci1zdGF0ZXMgc28gaXQgdGFrZXMgcHJlY2VkZW5jZVxuLy8gKiBhIHJlYWRvbmx5LWZpZWxkIGNhbm5vdCBiZSBjaGFuZ2VkLCBidXQgaXQgbWlnaHQgYmUgcmVsZXZhbnQgZm9yIHZhbGlkYXRpb24sIHNvIGVycm9yIGFuZCB3YXJuaW5nIGFyZSBjaGVja2VkIGZpcnN0XG4vLyBob3cgeW91IGNhbiBpbnRlcmFjdCB3aXRoIHRoZSBmaWVsZCBpcyBjb250cm9sbGVkIHNlcGFyYXRlbHkgYnkgdGhlIHByb3BzLCB0aGlzIG9ubHkgaW5mbHVlbmNlcyB2aXN1YWxzXG5jb25zdCBnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlcyA9ICgpID0+IFtcbiAgY3NzYFxuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7XG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcbiAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgIGZsZXg6IGF1dG87XG4gIGAsXG5dO1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsQmFja2dyb3VuZENvbG9yID0gKHByb3BzOiBUTG9jYWxpemVkSW5wdXRQcm9wcykgPT4ge1xuICBpZiAocHJvcHMuaXNEaXNhYmxlZCkge1xuICAgIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbFdoZW5EaXNhYmxlZDtcbiAgfVxuICBpZiAocHJvcHMuaXNSZWFkT25seSkge1xuICAgIHJldHVybiBkZXNpZ25Ub2tlbnMuYmFja2dyb3VuZENvbG9yRm9yTG9jYWxpemVkSW5wdXRMYWJlbFdoZW5SZWFkb25seTtcbiAgfVxuICByZXR1cm4gZGVzaWduVG9rZW5zLmJhY2tncm91bmRDb2xvckZvckxvY2FsaXplZElucHV0TGFiZWw7XG59O1xuXG5jb25zdCBnZXRMYW5ndWFnZUxhYmVsQm9yZGVyQ29sb3IgPSAocHJvcHM6IFRMb2NhbGl6ZWRJbnB1dFByb3BzKSA9PiB7XG4gIGlmIChwcm9wcy5pc0Rpc2FibGVkKSB7XG4gICAgcmV0dXJuIGRlc2lnblRva2Vucy5ib3JkZXJDb2xvckZvcklucHV0V2hlbkRpc2FibGVkO1xuICB9XG4gIHJldHVybiBwcm9wcy5pc1JlYWRPbmx5XG4gICAgPyBkZXNpZ25Ub2tlbnMuY29sb3JTdXJmYWNlXG4gICAgOiBkZXNpZ25Ub2tlbnMuY29sb3JOZXV0cmFsO1xufTtcblxuY29uc3QgZ2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyA9IChwcm9wczogVExvY2FsaXplZElucHV0UHJvcHMpID0+IHtcbiAgcmV0dXJuIGNzc2BcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgLyogYXZvaWQgd3JhcHBpbmcgbGFiZWwgb250byBuZXcgbGluZXMgKi9cbiAgICBmbGV4OiAxIDAgYXV0bztcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGNvbG9yOiAke2Rlc2lnblRva2Vucy5jb2xvck5ldXRyYWw2MH07XG4gICAgY3Vyc29yOiAke3Byb3BzLmlzRGlzYWJsZWQgPyAnbm90LWFsbG93ZWQnIDogJ2RlZmF1bHQnfTtcbiAgICBoZWlnaHQ6ICR7ZGVzaWduVG9rZW5zLmhlaWdodEZvcklucHV0fTtcbiAgICBmb250LXNpemU6ICR7ZGVzaWduVG9rZW5zLmZvbnRTaXplMzB9O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7Z2V0TGFuZ3VhZ2VMYWJlbEJhY2tncm91bmRDb2xvcihwcm9wcyl9O1xuICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR7ZGVzaWduVG9rZW5zLmJvcmRlclJhZGl1c0ZvcklucHV0fTtcbiAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAke2Rlc2lnblRva2Vucy5ib3JkZXJSYWRpdXNGb3JJbnB1dH07XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHtnZXRMYW5ndWFnZUxhYmVsQm9yZGVyQ29sb3IocHJvcHMpfTtcbiAgICBwYWRkaW5nOiAwICR7ZGVzaWduVG9rZW5zLnNwYWNpbmcyNX07XG4gICAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yICR7ZGVzaWduVG9rZW5zLnRyYW5zaXRpb25TdGFuZGFyZH0sXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yICR7ZGVzaWduVG9rZW5zLnRyYW5zaXRpb25TdGFuZGFyZH0sXG4gICAgICBjb2xvciAke2Rlc2lnblRva2Vucy50cmFuc2l0aW9uU3RhbmRhcmR9O1xuICAgIGJvcmRlci1yaWdodDogMDtcbiAgICBib3gtc2hhZG93OiBub25lO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gIGA7XG59O1xuXG5leHBvcnQgeyBnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlcywgZ2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyB9O1xuIl19 */");
};

function ownKeys(e, r) { var t = _Object$keys(e); if (_Object$getOwnPropertySymbols) { var o = _Object$getOwnPropertySymbols(e); r && (o = _filterInstanceProperty(o).call(o, function (r) { return _Object$getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context, _context2; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _forEachInstanceProperty(_context = ownKeys(Object(t), !0)).call(_context, function (r) { _defineProperty(e, r, t[r]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(e, _Object$getOwnPropertyDescriptors(t)) : _forEachInstanceProperty(_context2 = ownKeys(Object(t))).call(_context2, function (r) { _Object$defineProperty(e, r, _Object$getOwnPropertyDescriptor(t, r)); }); } return e; }
function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
const sequentialId = createSequentialId('localized-text-input-');
var _ref = process.env.NODE_ENV === "production" ? {
  name: "1ktetz7",
  styles: "width:100%;position:relative;display:flex"
} : {
  name: "1ysn02y-LocalizedInput",
  styles: "width:100%;position:relative;display:flex;label:LocalizedInput;",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsaXplZC10ZXh0LWlucHV0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErTmMiLCJmaWxlIjoibG9jYWxpemVkLXRleHQtaW5wdXQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdHlwZSBGb2N1c0V2ZW50SGFuZGxlcixcbiAgdHlwZSBDaGFuZ2VFdmVudEhhbmRsZXIsXG4gIHR5cGUgUmVhY3ROb2RlLFxuICB1c2VDYWxsYmFjayxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgdHlwZSBNZXNzYWdlRGVzY3JpcHRvciB9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgdXNlRmllbGRJZCwgdXNlVG9nZ2xlU3RhdGUgfSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9ob29rcyc7XG5pbXBvcnQge1xuICBFcnJvck1lc3NhZ2UsXG4gIEFkZGl0aW9uYWxJbmZvTWVzc2FnZSxcbiAgV2FybmluZ01lc3NhZ2UsXG59IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L21lc3NhZ2VzJztcbmltcG9ydCBTdGFjayBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC9zcGFjaW5ncy1zdGFjayc7XG5pbXBvcnQgQ29uc3RyYWludHMgZnJvbSAnQGNvbW1lcmNldG9vbHMtdWlraXQvY29uc3RyYWludHMnO1xuaW1wb3J0IHtcbiAgc29ydExhbmd1YWdlcyxcbiAgY3JlYXRlTG9jYWxpemVkRGF0YUF0dHJpYnV0ZXMsXG4gIGdldEhhc0Vycm9yT25SZW1haW5pbmdMYW5ndWFnZXMsXG4gIGdldEhhc1dhcm5pbmdPblJlbWFpbmluZ0xhbmd1YWdlcyxcbiAgaXNUb3VjaGVkLFxuICBvbWl0RW1wdHlUcmFuc2xhdGlvbnMsXG4gIGlzRW1wdHksXG4gIGNyZWF0ZUxvY2FsaXplZFN0cmluZyxcbiAgZ2V0SWQsXG4gIGdldE5hbWUsXG59IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L2xvY2FsaXplZC11dGlscyc7XG5pbXBvcnQgeyBjcmVhdGVTZXF1ZW50aWFsSWQsIHdhcm5pbmcgfSBmcm9tICdAY29tbWVyY2V0b29scy11aWtpdC91dGlscyc7XG5pbXBvcnQgVGV4dElucHV0IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L3RleHQtaW5wdXQnO1xuaW1wb3J0IHtcbiAgTG9jYWxpemVkSW5wdXRUb2dnbGUsXG4gIG1lc3NhZ2VzTG9jYWxpemVkSW5wdXQsXG59IGZyb20gJ0Bjb21tZXJjZXRvb2xzLXVpa2l0L2lucHV0LXV0aWxzJztcbmltcG9ydCB7XG4gIGdldExvY2FsaXplZElucHV0U3R5bGVzLFxuICBnZXRMYW5ndWFnZUxhYmVsU3R5bGVzLFxufSBmcm9tICcuL2xvY2FsaXplZC10ZXh0LWlucHV0LnN0eWxlcyc7XG5cbmludGVyZmFjZSBIVE1MTG9jYWxpemVkSW5wdXRFbGVtZW50IGV4dGVuZHMgSFRNTElucHV0RWxlbWVudCB7XG4gIGxhbmd1YWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRMb2NhbGl6ZWRUZXh0SW5wdXRQcm9wcyA9IHtcbiAgaWQ/OiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGF1dG9Db21wbGV0ZT86IHN0cmluZztcbiAgLyoqXG4gICAqIEluZGljYXRlIGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGluIHRoZSBpbnB1dCBpcyBpbnZhbGlkLlxuICAgKi9cbiAgJ2FyaWEtaW52YWxpZCc/OiBib29sZWFuO1xuICAvKipcbiAgICogSFRNTCBJRCBvZiBhbiBlbGVtZW50IGNvbnRhaW5pbmcgYW4gZXJyb3IgbWVzc2FnZSByZWxhdGVkIHRvIHRoZSBpbnB1dC5cbiAgICovXG4gICdhcmlhLWVycm9ybWVzc2FnZSc/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiAgIHRoZW4gaW5wdXQgZG9lc24ndCBhY2NlcHQgYSBcImxhbmd1YWdlc1wiIHByb3AsIGluc3RlYWQgYWxsIHBvc3NpYmxlXG4gIGxhbmd1YWdlcyBoYXZlIHRvIGV4aXN0ICh3aXRoIGVtcHR5IG9yIGZpbGxlZCBzdHJpbmdzKSBvbiB0aGUgdmFsdWU6XG4gICAgeyBlbjogJ2ZvbycsIGRlOiAnJywgZXM6ICcnIH1cbiAgICovXG4gIHZhbHVlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAvKipcbiAgICogR2V0cyBjYWxsZWQgd2hlbiBhbnkgaW5wdXQgaXMgY2hhbmdlZC4gSXMgY2FsbGVkIHdpdGggdGhlIGNoYW5nZSBldmVudCBvZiB0aGUgY2hhbmdlZCBpbnB1dC5cbiAgICovXG4gIG9uQ2hhbmdlPzogQ2hhbmdlRXZlbnRIYW5kbGVyPEhUTUxMb2NhbGl6ZWRJbnB1dEVsZW1lbnQ+O1xuICAvKipcbiAgICogU3BlY2lmaWVzIHdoaWNoIGxhbmd1YWdlIHdpbGwgYmUgc2hvd24gaW4gY2FzZSB0aGUgYExvY2FsaXplZFRleHRJbnB1dGAgaXMgY29sbGFwc2VkLlxuICAgKi9cbiAgc2VsZWN0ZWRMYW5ndWFnZTogc3RyaW5nO1xuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYW55IGZpZWxkIGlzIGJsdXJyZWQuIElzIGNhbGxlZCB3aXRoIHRoZSBgZXZlbnRgIG9mIHRoYXQgZmllbGQuXG4gICAqL1xuICBvbkJsdXI/OiBGb2N1c0V2ZW50SGFuZGxlcjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGFueSBmaWVsZCBpcyBmb2N1c3NlZC4gSXMgY2FsbGVkIHdpdGggdGhlIGBldmVudGAgb2YgdGhhdCBmaWVsZC5cbiAgICovXG4gIG9uRm9jdXM/OiBGb2N1c0V2ZW50SGFuZGxlcjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgLyoqXG4gICAqIFdpbGwgaGlkZSB0aGUgbGFuZ3VhZ2UgZXhwYW5zaW9uIGNvbnRyb2xzIHdoZW4gc2V0IHRvIGB0cnVlYC4gQWxsIGxhbmd1YWdlcyB3aWxsIGJlIHNob3duIHdoZW4gc2V0IHRvIGB0cnVlYC5cbiAgICovXG4gIGhpZGVMYW5ndWFnZUV4cGFuc2lvbkNvbnRyb2xzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIENvbnRyb2xzIHdoZXRoZXIgb25lIG9yIGFsbCBsYW5ndWFnZXMgYXJlIHZpc2libGUgYnkgZGVmYXVsdFxuICAgKi9cbiAgZGVmYXVsdEV4cGFuZExhbmd1YWdlcz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgaW5wdXQgZmllbGQgb24gaW5pdGlhbCByZW5kZXJcbiAgICovXG4gIGlzQXV0b2ZvY3Vzc2VkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBpbnB1dCBmaWVsZHMuXG4gICAqL1xuICBpc0Rpc2FibGVkPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBpbnB1dCBmaWVsZHMgYW5kIHNob3dzIHRoZW0gaW4gcmVhZC1vbmx5IG1vZGUuXG4gICAqL1xuICBpc1JlYWRPbmx5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFBsYWNlaG9sZGVycyBmb3IgZWFjaCBsYW5ndWFnZS4gT2JqZWN0IG9mIHRoZSBzYW1lIHNoYXBlIGFzIGB2YWx1ZWAuXG4gICAqL1xuICBwbGFjZWhvbGRlcj86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIC8qKlxuICAgKiBIb3Jpem9udGFsIHNpemUgbGltaXQgb2YgdGhlIGlucHV0IGZpZWxkcy5cbiAgICovXG4gIGhvcml6b250YWxDb25zdHJhaW50PzpcbiAgICB8IDFcbiAgICB8IDJcbiAgICB8IDNcbiAgICB8IDRcbiAgICB8IDVcbiAgICB8IDZcbiAgICB8IDdcbiAgICB8IDhcbiAgICB8IDlcbiAgICB8IDEwXG4gICAgfCAxMVxuICAgIHwgMTJcbiAgICB8IDEzXG4gICAgfCAxNFxuICAgIHwgMTVcbiAgICB8IDE2XG4gICAgfCAnc2NhbGUnXG4gICAgfCAnYXV0byc7XG4gIC8qKlxuICAgKiBXaWxsIGFwcGx5IHRoZSBlcnJvciBzdGF0ZSB0byBlYWNoIGlucHV0IHdpdGhvdXQgc2hvd2luZyBhbnkgZXJyb3IgbWVzc2FnZS5cbiAgICovXG4gIGhhc0Vycm9yPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGUgaW5wdXQgZmllbGQgaGFzIGEgd2FybmluZ1xuICAgKi9cbiAgaGFzV2FybmluZz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBVc2VkIHRvIHNob3cgZXJyb3JzIHVuZGVybmVhdGggdGhlIGlucHV0cyBvZiBzcGVjaWZpYyBsb2NhbGVzLiBQYXNzIGFuIG9iamVjdCB3aG9zZSBrZXkgaXMgYSBsb2NhbGUgYW5kIHdob3NlIHZhbHVlIGlzIHRoZSBlcnJvciB0byBzaG93IGZvciB0aGF0IGtleS5cbiAgICovXG4gIGVycm9ycz86IFJlY29yZDxzdHJpbmcsIFJlYWN0Tm9kZT47XG4gIC8qKlxuICAgKiBBIG1hcCBvZiB3YXJuaW5ncy5cbiAgICovXG4gIHdhcm5pbmdzPzogUmVjb3JkPHN0cmluZywgUmVhY3ROb2RlPjtcbiAgLyoqXG4gICAqIEFuIG9iamVjdCBtYXBwaW5nIGxvY2FsZXMgdG8gYWRkaXRpb25hbCBtZXNzYWdlcyB0byBiZSByZW5kZXJlZCBiZWxvdyBlYWNoIGlucHV0IGVsZW1lbnQuXG4gICAgRXhhbXBsZTpcbiAgICB7XG4gICAgICBlbjogJ1NvbWUgdmFsdWUnLFxuICAgICAgZXM6ICdBbGfDum4gdmFsb3InLFxuICAgIH1cbiAgICovXG4gIGFkZGl0aW9uYWxJbmZvPzogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICB8IHN0cmluZ1xuICAgIHwgUmVhY3ROb2RlXG4gICAgfCAoTWVzc2FnZURlc2NyaXB0b3IgJiB7XG4gICAgICAgIHZhbHVlczogUmVjb3JkPHN0cmluZywgUmVhY3ROb2RlPjtcbiAgICAgIH0pXG4gID47XG59O1xuXG5leHBvcnQgdHlwZSBUTG9jYWxpemVkSW5wdXRQcm9wcyA9IHtcbiAgLyoqXG4gICAqIFVzZWQgYXMgcHJlZml4IG9mIEhUTUwgYGlkYCBwcm9wZXJ0eS4gRWFjaCBpbnB1dCBmaWVsZCBpZCB3aWxsIGhhdmUgdGhlIGxhbmd1YWdlIGFzIGEgc3VmZml4IChgJHtpZFByZWZpeH0uJHtsYW5nfWApLCBlLmcuIGBmb28uZW5gLiBZb3UgY2FuIHVzZSB0aGUgc3RhdGljIGBMb2NhbGl6ZWRUZXh0SW5wdXQuZ2V0SWQoaWRQcmVmaXgsIGxhbmd1YWdlKWAgdG8gY3JlYXRlIHRoaXMgaWQgc3RyaW5nLCBlLmcuIGZvciBsYWJlbHMuXG4gICAqL1xuICBpZD86IHN0cmluZztcbiAgLyoqXG4gICAqIFVzZWQgYXMgSFRNTCBgbmFtZWAgcHJvcGVydHkgZm9yIGVhY2ggaW5wdXQgZmllbGQuIEVhY2ggaW5wdXQgZmllbGQgbmFtZSB3aWxsIGhhdmUgdGhlIGxhbmd1YWdlIGFzIGEgc3VmZml4IChgJHtuYW1lUHJlZml4fS4ke2xhbmd9YCksIGUuZy4gYGZvby5lbmBcbiAgICovXG4gIG5hbWU/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBVc2VkIGFzIEhUTUwgYGF1dG9jb21wbGV0ZWAgcHJvcGVydHlcbiAgICovXG4gIGF1dG9Db21wbGV0ZT86IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbiAgLyoqXG4gICAqIEdldHMgY2FsbGVkIHdoZW4gYW55IGlucHV0IGlzIGNoYW5nZWQuIElzIGNhbGxlZCB3aXRoIHRoZSBjaGFuZ2UgZXZlbnQgb2YgdGhlIGNoYW5nZWQgaW5wdXQuXG4gICAqL1xuICBvbkNoYW5nZT86IENoYW5nZUV2ZW50SGFuZGxlcjxIVE1MTG9jYWxpemVkSW5wdXRFbGVtZW50PjtcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgb25CbHVyPzogRm9jdXNFdmVudEhhbmRsZXI8SFRNTElucHV0RWxlbWVudD47XG4gIG9uRm9jdXM/OiBGb2N1c0V2ZW50SGFuZGxlcjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgaXNBdXRvZm9jdXNzZWQ/OiBib29sZWFuO1xuICBpc0Rpc2FibGVkPzogYm9vbGVhbjtcbiAgaXNSZWFkT25seT86IGJvb2xlYW47XG4gIGhhc0Vycm9yPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGUgaW5wdXQgZmllbGQgaGFzIGEgd2FybmluZ1xuICAgKi9cbiAgaGFzV2FybmluZz86IGJvb2xlYW47XG4gIHdhcm5pbmc/OiBSZWFjdE5vZGU7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufTtcblxuY29uc3Qgc2VxdWVudGlhbElkID0gY3JlYXRlU2VxdWVudGlhbElkKCdsb2NhbGl6ZWQtdGV4dC1pbnB1dC0nKTtcblxuY29uc3QgTG9jYWxpemVkSW5wdXQgPSAocHJvcHM6IFRMb2NhbGl6ZWRJbnB1dFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHByb3BzO1xuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgIC8vIFdlIG1hbmlwdWxhdGUgdGhlIGV2ZW50IHRvIGFkZCB0aGUgbGFuZ3VhZ2UgdG8gdGhlIHRhcmdldC5cbiAgICAgIC8vIFRoYXQgd2F5IHRoZSB1c2VycyBvZiBMb2NhbGl6ZWRUZXh0SW5wdXQncyBvbkNoYW5nZSBjYW4gcmVhZFxuICAgICAgLy8gZXZlbnQudGFyZ2V0Lmxhbmd1YWdlIGFuZCBldmVudC50YXJnZXQudmFsdWUgdG8gZGV0ZXJtaW5lIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgLy9cbiAgICAgIC8vIFdlIG9ubHkgbmVlZCB0aGlzIGluZm9ybWF0aW9uIGZvciB0aGUgc3RvcnksIHRoZSBNQyBhcHBsaWNhdGlvbiBjb2RlIHdpbGxcbiAgICAgIC8vIG5ldmVyIG5lZWQgdG8gYWNjZXNzIHRoZSBpbmZvcm1hdGlvbiBpbiBzdWNoIGFuIGluY29udmVuaWVudCB3YXksIGFzXG4gICAgICAvLyBGb3JtaWsgY2FuIGRlYWwgd2l0aCBhIG5hbWUgbGlrZSBcImZvby5lblwiIGFuZCBzZXRzIHRoZSB2YWx1ZSBjb3JyZWN0bHkuXG4gICAgICAvLyBXZSBjYW4ndCB1c2UgdGhpcyBhcyB3ZSBhcmVuJ3QgZ3VhcmFudGVlZCBhIG5hbWUgaW4gdGhlIHN0b3J5IGFzIHRoZSB1c2VyXG4gICAgICAvLyBtaWdodCBjbGVhciBpdCB1c2luZyB0aGUga25vYiwgYW5kIHRoZW4gd2UgY2FuJ3QgcGFyc2UgdGhlIGxhbmd1YWdlIGZyb21cbiAgICAgIC8vIHRoZSBpbnB1dCBuYW1lIGFueW1vcmUuXG4gICAgICAvL1xuICAgICAgZXZlbnQudGFyZ2V0Lmxhbmd1YWdlID0gcHJvcHMubGFuZ3VhZ2U7XG4gICAgICBvbkNoYW5nZT8uKGV2ZW50KTtcbiAgICB9LFxuICAgIFtwcm9wcy5sYW5ndWFnZSwgb25DaGFuZ2VdXG4gICk7XG5cbiAgaWYgKCFwcm9wcy5pc1JlYWRPbmx5KSB7XG4gICAgd2FybmluZyhcbiAgICAgIHR5cGVvZiBwcm9wcy5vbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICdMb2NhbGl6ZWRUZXh0SW5wdXQ6IFwib25DaGFuZ2VcIiBpcyByZXF1aXJlZCB3aGVuIGlzUmVhZE9ubHkgaXMgbm90IHRydWUnXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAga2V5PXtwcm9wcy5sYW5ndWFnZX1cbiAgICAgIGNzcz17Y3NzYFxuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYH1cbiAgICA+XG4gICAgICA8bGFiZWwgaHRtbEZvcj17cHJvcHMuaWR9IGNzcz17Z2V0TGFuZ3VhZ2VMYWJlbFN0eWxlcyhwcm9wcyl9PlxuICAgICAgICB7cHJvcHMubGFuZ3VhZ2UudG9VcHBlckNhc2UoKX1cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8VGV4dElucHV0XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgY3NzPXtnZXRMb2NhbGl6ZWRJbnB1dFN0eWxlc31cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5Mb2NhbGl6ZWRJbnB1dC5kaXNwbGF5TmFtZSA9ICdMb2NhbGl6ZWRJbnB1dCc7XG5cbmNvbnN0IFJlcXVpcmVkVmFsdWVFcnJvck1lc3NhZ2UgPSAoKSA9PiAoXG4gIDxFcnJvck1lc3NhZ2U+XG4gICAgPEZvcm1hdHRlZE1lc3NhZ2Ugey4uLm1lc3NhZ2VzTG9jYWxpemVkSW5wdXQubWlzc2luZ1JlcXVpcmVkRmllbGR9IC8+XG4gIDwvRXJyb3JNZXNzYWdlPlxuKTtcblxuUmVxdWlyZWRWYWx1ZUVycm9yTWVzc2FnZS5kaXNwbGF5TmFtZSA9ICdSZXF1aXJlZFZhbHVlRXJyb3JNZXNzYWdlJztcblxuY29uc3QgTG9jYWxpemVkVGV4dElucHV0ID0gKHByb3BzOiBUTG9jYWxpemVkVGV4dElucHV0UHJvcHMpID0+IHtcbiAgY29uc3QgZGVmYXVsdEV4cGFuc2lvblN0YXRlID1cbiAgICBwcm9wcy5oaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9scyB8fFxuICAgIHByb3BzLmRlZmF1bHRFeHBhbmRMYW5ndWFnZXMgfHwgLy8gZGVmYXVsdCB0byBgZmFsc2VgLCBiZWNhdXNlIHVzZVRvZ2dsZVN0YXRlIGRlZmF1bHRzIHRvIGB0cnVlYFxuICAgIGZhbHNlO1xuXG4gIGNvbnN0IFthcmVMYW5ndWFnZXNFeHBhbmRlZCwgdG9nZ2xlTGFuZ3VhZ2VzXSA9IHVzZVRvZ2dsZVN0YXRlKFxuICAgIGRlZmF1bHRFeHBhbnNpb25TdGF0ZVxuICApO1xuXG4gIGNvbnN0IG9uTG9jYWxpemVkSW5wdXRUb2dnbGUgPSB1c2VDYWxsYmFjayhcbiAgICAoKSA9PiB0b2dnbGVMYW5ndWFnZXMoKSxcbiAgICBbdG9nZ2xlTGFuZ3VhZ2VzXVxuICApO1xuXG4gIGNvbnN0IGxhbmd1YWdlcyA9IHNvcnRMYW5ndWFnZXMoXG4gICAgcHJvcHMuc2VsZWN0ZWRMYW5ndWFnZSxcbiAgICBPYmplY3Qua2V5cyhwcm9wcy52YWx1ZSlcbiAgKTtcblxuICBjb25zdCBpZCA9IHVzZUZpZWxkSWQocHJvcHMuaWQsIHNlcXVlbnRpYWxJZCk7XG5cbiAgY29uc3QgaGFzRXJyb3JJblJlbWFpbmluZ0xhbmd1YWdlcyA9XG4gICAgcHJvcHMuaGFzRXJyb3IgfHxcbiAgICBnZXRIYXNFcnJvck9uUmVtYWluaW5nTGFuZ3VhZ2VzKHByb3BzLmVycm9ycywgcHJvcHMuc2VsZWN0ZWRMYW5ndWFnZSk7XG5cbiAgY29uc3QgaGFzV2FybmluZ0luUmVtYWluaW5nTGFuZ3VhZ2VzID1cbiAgICBwcm9wcy5oYXNXYXJuaW5nIHx8XG4gICAgZ2V0SGFzV2FybmluZ09uUmVtYWluaW5nTGFuZ3VhZ2VzKHByb3BzLndhcm5pbmdzLCBwcm9wcy5zZWxlY3RlZExhbmd1YWdlKTtcblxuICBpZiAoaGFzRXJyb3JJblJlbWFpbmluZ0xhbmd1YWdlcyB8fCBoYXNXYXJuaW5nSW5SZW1haW5pbmdMYW5ndWFnZXMpIHtcbiAgICAvLyB0aGlzIHVwZGF0ZSB3aXRoaW4gcmVuZGVyIHJlcGxhY2VzIHRoZSBvbGQgYGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wc2AgZnVuY3Rpb25hbGl0eVxuICAgIC8vIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ob29rcy1mYXEuaHRtbCNob3ctZG8taS1pbXBsZW1lbnQtZ2V0ZGVyaXZlZHN0YXRlZnJvbXByb3BzXG4gICAgaWYgKCFhcmVMYW5ndWFnZXNFeHBhbmRlZCkge1xuICAgICAgdG9nZ2xlTGFuZ3VhZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc2hvdWxkUmVuZGVyTGFuZ3VhZ2VzQnV0dG9uID1cbiAgICBsYW5ndWFnZXMubGVuZ3RoID4gMSAmJiAhcHJvcHMuaGlkZUxhbmd1YWdlRXhwYW5zaW9uQ29udHJvbHM7XG5cbiAgaWYgKCFwcm9wcy5pc1JlYWRPbmx5KSB7XG4gICAgd2FybmluZyhcbiAgICAgIHR5cGVvZiBwcm9wcy5vbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICdMb2NhbGl6ZWRUZXh0SW5wdXQ6IFwib25DaGFuZ2VcIiBpcyByZXF1aXJlZCB3aGVuIGlzUmVhZE9ubHkgaXMgbm90IHRydWUnXG4gICAgKTtcbiAgfVxuXG4gIGlmIChwcm9wcy5oaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9scykge1xuICAgIHdhcm5pbmcoXG4gICAgICB0eXBlb2YgcHJvcHMuZGVmYXVsdEV4cGFuZExhbmd1YWdlcyAhPT0gJ2Jvb2xlYW4nLFxuICAgICAgJ0xvY2FsaXplZFRleHRJbnB1dDogXCJkZWZhdWx0RXhwYW5kTGFuZ3VhZ2VzXCIgZG9lcyBub3QgaGF2ZSBhbnkgZWZmZWN0IHdoZW4gXCJoaWRlTGFuZ3VhZ2VFeHBhbnNpb25Db250cm9sc1wiIGlzIHNldC4nXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENvbnN0cmFpbnRzLkhvcml6b250YWwgbWF4PXtwcm9wcy5ob3Jpem9udGFsQ29uc3RyYWludH0+XG4gICAgICA8U3RhY2sgc2NhbGU9XCJ4c1wiPlxuICAgICAgICA8U3RhY2s+XG4gICAgICAgICAge2xhbmd1YWdlcy5tYXAoKGxhbmd1YWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNGaXJzdExhbmd1YWdlID0gaW5kZXggPT09IDA7XG4gICAgICAgICAgICBpZiAoIWlzRmlyc3RMYW5ndWFnZSAmJiAhYXJlTGFuZ3VhZ2VzRXhwYW5kZWQpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8ZGl2IGtleT17bGFuZ3VhZ2V9PlxuICAgICAgICAgICAgICAgIDxTdGFjayBzY2FsZT1cInhzXCI+XG4gICAgICAgICAgICAgICAgICA8TG9jYWxpemVkSW5wdXRcbiAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlPXtwcm9wcy5hdXRvQ29tcGxldGV9XG4gICAgICAgICAgICAgICAgICAgIGlkPXtMb2NhbGl6ZWRUZXh0SW5wdXQuZ2V0SWQoaWQsIGxhbmd1YWdlKX1cbiAgICAgICAgICAgICAgICAgICAgbmFtZT17TG9jYWxpemVkVGV4dElucHV0LmdldE5hbWUocHJvcHMubmFtZSwgbGFuZ3VhZ2UpfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWVbbGFuZ3VhZ2VdfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17cHJvcHMub25DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPXtsYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1xuICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHByb3BzLnBsYWNlaG9sZGVyW2xhbmd1YWdlXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9e3Byb3BzLm9uQmx1cn1cbiAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17cHJvcHMub25Gb2N1c31cbiAgICAgICAgICAgICAgICAgICAgaXNBdXRvZm9jdXNzZWQ9e2luZGV4ID09PSAwICYmIHByb3BzLmlzQXV0b2ZvY3Vzc2VkfVxuICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkPXtwcm9wcy5pc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICBpc1JlYWRPbmx5PXtwcm9wcy5pc1JlYWRPbmx5fVxuICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcj17Qm9vbGVhbihcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5oYXNFcnJvciB8fCAocHJvcHMuZXJyb3JzICYmIHByb3BzLmVycm9yc1tsYW5ndWFnZV0pXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIGhhc1dhcm5pbmc9e0Jvb2xlYW4oXG4gICAgICAgICAgICAgICAgICAgICAgcHJvcHMuaGFzV2FybmluZyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHByb3BzLndhcm5pbmdzICYmIHByb3BzLndhcm5pbmdzW2xhbmd1YWdlXSlcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgd2FybmluZz17cHJvcHMud2FybmluZ3MgJiYgcHJvcHMud2FybmluZ3NbbGFuZ3VhZ2VdfVxuICAgICAgICAgICAgICAgICAgICB7Li4uY3JlYXRlTG9jYWxpemVkRGF0YUF0dHJpYnV0ZXMocHJvcHMsIGxhbmd1YWdlKX1cbiAgICAgICAgICAgICAgICAgICAgLyogQVJJQSAqL1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWludmFsaWQ9e3Byb3BzWydhcmlhLWludmFsaWQnXX1cbiAgICAgICAgICAgICAgICAgICAgYXJpYS1lcnJvcm1lc3NhZ2U9e3Byb3BzWydhcmlhLWVycm9ybWVzc2FnZSddfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIHtwcm9wcy5lcnJvcnM/LltsYW5ndWFnZV0gJiYgKFxuICAgICAgICAgICAgICAgICAgICA8RXJyb3JNZXNzYWdlPntwcm9wcy5lcnJvcnNbbGFuZ3VhZ2VdfTwvRXJyb3JNZXNzYWdlPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIHtwcm9wcy53YXJuaW5ncz8uW2xhbmd1YWdlXSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxXYXJuaW5nTWVzc2FnZT57cHJvcHMud2FybmluZ3NbbGFuZ3VhZ2VdfTwvV2FybmluZ01lc3NhZ2U+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge3Byb3BzLmFkZGl0aW9uYWxJbmZvPy5bbGFuZ3VhZ2VdICYmIChcbiAgICAgICAgICAgICAgICAgICAgPEFkZGl0aW9uYWxJbmZvTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e3Byb3BzLmFkZGl0aW9uYWxJbmZvW2xhbmd1YWdlXX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9TdGFjaz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0pfVxuICAgICAgICA8L1N0YWNrPlxuICAgICAgICB7c2hvdWxkUmVuZGVyTGFuZ3VhZ2VzQnV0dG9uICYmIChcbiAgICAgICAgICA8TG9jYWxpemVkSW5wdXRUb2dnbGVcbiAgICAgICAgICAgIGlzT3Blbj17YXJlTGFuZ3VhZ2VzRXhwYW5kZWR9XG4gICAgICAgICAgICBvbkNsaWNrPXtvbkxvY2FsaXplZElucHV0VG9nZ2xlfVxuICAgICAgICAgICAgaXNEaXNhYmxlZD17XG4gICAgICAgICAgICAgIGFyZUxhbmd1YWdlc0V4cGFuZGVkICYmXG4gICAgICAgICAgICAgIEJvb2xlYW4oXG4gICAgICAgICAgICAgICAgaGFzRXJyb3JJblJlbWFpbmluZ0xhbmd1YWdlcyB8fCBoYXNXYXJuaW5nSW5SZW1haW5pbmdMYW5ndWFnZXNcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVtYWluaW5nTG9jYWxpemF0aW9ucz17bGFuZ3VhZ2VzLmxlbmd0aCAtIDF9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvU3RhY2s+XG4gICAgPC9Db25zdHJhaW50cy5Ib3Jpem9udGFsPlxuICApO1xufTtcblxuTG9jYWxpemVkVGV4dElucHV0LmRpc3BsYXlOYW1lID0gJ0xvY2FsaXplZFRleHRJbnB1dCc7XG5cbkxvY2FsaXplZFRleHRJbnB1dC5SZXF1aXJlZFZhbHVlRXJyb3JNZXNzYWdlID0gUmVxdWlyZWRWYWx1ZUVycm9yTWVzc2FnZTtcblxuTG9jYWxpemVkVGV4dElucHV0LmRlZmF1bHRQcm9wcyA9IHtcbiAgaG9yaXpvbnRhbENvbnN0cmFpbnQ6ICdzY2FsZScsXG59O1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuZ2V0SWQgPSBnZXRJZDtcblxuTG9jYWxpemVkVGV4dElucHV0LmdldE5hbWUgPSBnZXROYW1lO1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuY3JlYXRlTG9jYWxpemVkU3RyaW5nID0gY3JlYXRlTG9jYWxpemVkU3RyaW5nO1xuXG5Mb2NhbGl6ZWRUZXh0SW5wdXQuaXNFbXB0eSA9IGlzRW1wdHk7XG5cbkxvY2FsaXplZFRleHRJbnB1dC5vbWl0RW1wdHlUcmFuc2xhdGlvbnMgPSBvbWl0RW1wdHlUcmFuc2xhdGlvbnM7XG5cbkxvY2FsaXplZFRleHRJbnB1dC5pc1RvdWNoZWQgPSBpc1RvdWNoZWQ7XG5cbmV4cG9ydCBkZWZhdWx0IExvY2FsaXplZFRleHRJbnB1dDtcbiJdfQ== */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
};
const LocalizedInput = props => {
  const onChange = props.onChange;
  const handleChange = useCallback(event => {
    // We manipulate the event to add the language to the target.
    // That way the users of LocalizedTextInput's onChange can read
    // event.target.language and event.target.value to determine the next value.
    //
    // We only need this information for the story, the MC application code will
    // never need to access the information in such an inconvenient way, as
    // Formik can deal with a name like "foo.en" and sets the value correctly.
    // We can't use this as we aren't guaranteed a name in the story as the user
    // might clear it using the knob, and then we can't parse the language from
    // the input name anymore.
    //
    event.target.language = props.language;
    onChange === null || onChange === void 0 || onChange(event);
  }, [props.language, onChange]);
  if (!props.isReadOnly) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.onChange === 'function', 'LocalizedTextInput: "onChange" is required when isReadOnly is not true') : void 0;
  }
  return jsxs("div", {
    css: _ref,
    children: [jsx("label", {
      htmlFor: props.id,
      css: getLanguageLabelStyles(props),
      children: props.language.toUpperCase()
    }), jsx(TextInput, _objectSpread(_objectSpread({}, props), {}, {
      onChange: handleChange,
      css: getLocalizedInputStyles
    }))]
  }, props.language);
};
LocalizedInput.propTypes = process.env.NODE_ENV !== "production" ? {
  id: _pt.string,
  name: _pt.string,
  autoComplete: _pt.string,
  value: _pt.string.isRequired,
  onChange: _pt.func,
  language: _pt.string.isRequired,
  onBlur: _pt.func,
  onFocus: _pt.func,
  isAutofocussed: _pt.bool,
  isDisabled: _pt.bool,
  isReadOnly: _pt.bool,
  hasError: _pt.bool,
  hasWarning: _pt.bool,
  warning: _pt.node,
  placeholder: _pt.string
} : {};
LocalizedInput.displayName = 'LocalizedInput';
const RequiredValueErrorMessage = () => jsx(ErrorMessage, {
  children: jsx(FormattedMessage, _objectSpread({}, messagesLocalizedInput.missingRequiredField))
});
RequiredValueErrorMessage.displayName = 'RequiredValueErrorMessage';
const LocalizedTextInput = props => {
  const defaultExpansionState = props.hideLanguageExpansionControls || props.defaultExpandLanguages ||
  // default to `false`, because useToggleState defaults to `true`
  false;
  const _useToggleState = useToggleState(defaultExpansionState),
    _useToggleState2 = _slicedToArray(_useToggleState, 2),
    areLanguagesExpanded = _useToggleState2[0],
    toggleLanguages = _useToggleState2[1];
  const onLocalizedInputToggle = useCallback(() => toggleLanguages(), [toggleLanguages]);
  const languages = sortLanguages(props.selectedLanguage, _Object$keys(props.value));
  const id = useFieldId(props.id, sequentialId);
  const hasErrorInRemainingLanguages = props.hasError || getHasErrorOnRemainingLanguages(props.errors, props.selectedLanguage);
  const hasWarningInRemainingLanguages = props.hasWarning || getHasWarningOnRemainingLanguages(props.warnings, props.selectedLanguage);
  if (hasErrorInRemainingLanguages || hasWarningInRemainingLanguages) {
    // this update within render replaces the old `getDerivedStateFromProps` functionality
    // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops
    if (!areLanguagesExpanded) {
      toggleLanguages();
    }
  }
  const shouldRenderLanguagesButton = languages.length > 1 && !props.hideLanguageExpansionControls;
  if (!props.isReadOnly) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.onChange === 'function', 'LocalizedTextInput: "onChange" is required when isReadOnly is not true') : void 0;
  }
  if (props.hideLanguageExpansionControls) {
    process.env.NODE_ENV !== "production" ? warning(typeof props.defaultExpandLanguages !== 'boolean', 'LocalizedTextInput: "defaultExpandLanguages" does not have any effect when "hideLanguageExpansionControls" is set.') : void 0;
  }
  return jsx(Constraints.Horizontal, {
    max: props.horizontalConstraint,
    children: jsxs(Stack, {
      scale: "xs",
      children: [jsx(Stack, {
        children: _mapInstanceProperty(languages).call(languages, (language, index) => {
          var _props$errors, _props$warnings, _props$additionalInfo;
          const isFirstLanguage = index === 0;
          if (!isFirstLanguage && !areLanguagesExpanded) return null;
          return jsx("div", {
            children: jsxs(Stack, {
              scale: "xs",
              children: [jsx(LocalizedInput, _objectSpread(_objectSpread({
                autoComplete: props.autoComplete,
                id: LocalizedTextInput.getId(id, language),
                name: LocalizedTextInput.getName(props.name, language),
                value: props.value[language],
                onChange: props.onChange,
                language: language,
                placeholder: props.placeholder ? props.placeholder[language] : undefined,
                onBlur: props.onBlur,
                onFocus: props.onFocus,
                isAutofocussed: index === 0 && props.isAutofocussed,
                isDisabled: props.isDisabled,
                isReadOnly: props.isReadOnly,
                hasError: Boolean(props.hasError || props.errors && props.errors[language]),
                hasWarning: Boolean(props.hasWarning || props.warnings && props.warnings[language]),
                warning: props.warnings && props.warnings[language]
              }, createLocalizedDataAttributes(props, language)), {}, {
                /* ARIA */
                "aria-invalid": props['aria-invalid'],
                "aria-errormessage": props['aria-errormessage']
              })), ((_props$errors = props.errors) === null || _props$errors === void 0 ? void 0 : _props$errors[language]) && jsx(ErrorMessage, {
                children: props.errors[language]
              }), ((_props$warnings = props.warnings) === null || _props$warnings === void 0 ? void 0 : _props$warnings[language]) && jsx(WarningMessage, {
                children: props.warnings[language]
              }), ((_props$additionalInfo = props.additionalInfo) === null || _props$additionalInfo === void 0 ? void 0 : _props$additionalInfo[language]) && jsx(AdditionalInfoMessage, {
                message: props.additionalInfo[language]
              })]
            })
          }, language);
        })
      }), shouldRenderLanguagesButton && jsx(LocalizedInputToggle, {
        isOpen: areLanguagesExpanded,
        onClick: onLocalizedInputToggle,
        isDisabled: areLanguagesExpanded && Boolean(hasErrorInRemainingLanguages || hasWarningInRemainingLanguages),
        remainingLocalizations: languages.length - 1
      })]
    })
  });
};
LocalizedTextInput.propTypes = process.env.NODE_ENV !== "production" ? {
  id: _pt.string,
  name: _pt.string,
  autoComplete: _pt.string,
  'aria-invalid': _pt.bool,
  'aria-errormessage': _pt.string,
  value: _pt.objectOf(_pt.string).isRequired,
  onChange: _pt.func,
  selectedLanguage: _pt.string.isRequired,
  onBlur: _pt.func,
  onFocus: _pt.func,
  hideLanguageExpansionControls: _pt.bool,
  defaultExpandLanguages: _pt.bool,
  isAutofocussed: _pt.bool,
  isDisabled: _pt.bool,
  isReadOnly: _pt.bool,
  placeholder: _pt.objectOf(_pt.string),
  horizontalConstraint: _pt.oneOf([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 'scale', 'auto']),
  hasError: _pt.bool,
  hasWarning: _pt.bool,
  errors: _pt.objectOf(_pt.node),
  warnings: _pt.objectOf(_pt.node),
  additionalInfo: _pt.objectOf(_pt.oneOfType([_pt.string, _pt.node, _pt.oneOfType([_pt.any, _pt.shape({
    values: _pt.objectOf(_pt.node).isRequired
  })])]))
} : {};
LocalizedTextInput.displayName = 'LocalizedTextInput';
LocalizedTextInput.RequiredValueErrorMessage = RequiredValueErrorMessage;
LocalizedTextInput.defaultProps = {
  horizontalConstraint: 'scale'
};
LocalizedTextInput.getId = getId;
LocalizedTextInput.getName = getName;
LocalizedTextInput.createLocalizedString = createLocalizedString;
LocalizedTextInput.isEmpty = isEmpty;
LocalizedTextInput.omitEmptyTranslations = omitEmptyTranslations;
LocalizedTextInput.isTouched = isTouched;
var LocalizedTextInput$1 = LocalizedTextInput;

// NOTE: This string will be replaced on build time with the package version.
var version = "18.3.0";

export { LocalizedTextInput$1 as default, version };
